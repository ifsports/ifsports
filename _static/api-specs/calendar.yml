{"openapi":"3.1.0","info":{"title":"Calendar Service","description":"Serviço de integração com Google Calendar para IF Sports","version":"1.0.0"},"paths":{"/api/v1/calendar/auth/login":{"get":{"tags":["Calendar"],"summary":"Get Auth Url","description":"Get Google Authorization URL\n\nGera a URL de autorização do Google para o fluxo OAuth2.\nEste é o primeiro passo para um usuário autorizar o acesso à sua agenda.\nO frontend deve chamar este endpoint, receber a URL e redirecionar o usuário para ela.\n\n**Exemplo de Resposta:**\n\n.. code-block:: json\n\n   {\n     \"authorization_url\": \"https://accounts.google.com/o/oauth2/v2/auth?response_type=code&client_id=...\"\n   }","operationId":"get_auth_url_api_v1_calendar_auth_login_get","parameters":[{"name":"user_email","in":"query","required":true,"schema":{"type":"string","title":"User Email"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthURLResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/calendar/auth/callback":{"get":{"tags":["Calendar"],"summary":"Auth Callback","description":"Handle Google Auth Callback\n\nEndpoint de callback para o fluxo OAuth2 do Google. **Não deve ser chamado diretamente.**\nO Google redireciona o usuário para cá após a autorização.\nO serviço troca o código de autorização (`code`) por tokens de acesso e de atualização,\nsalva as credenciais associadas ao e-mail do usuário (`state`), e então redireciona\no usuário de volta para o frontend com um status de sucesso ou falha.","operationId":"auth_callback_api_v1_calendar_auth_callback_get","parameters":[{"name":"code","in":"query","required":true,"schema":{"type":"string","title":"Code"}},{"name":"state","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"State"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/calendar/events":{"post":{"tags":["Calendar"],"summary":"Create Event","description":"Create a Calendar Event\n\nCria um novo evento na agenda Google do usuário.\nO usuário precisa ter completado o fluxo de autorização OAuth2 previamente,\npara que o sistema tenha as credenciais necessárias para agir em seu nome.\n\n**Exemplo de Corpo da Requisição (Payload):**\n\n.. code-block:: json\n\n   {\n     \"user_email\": \"aluno.exemplo@academico.ifrn.edu.br\",\n     \"match_details\": {\n       \"summary\": \"Final de Futsal: Titãs vs. Gladiadores\",\n       \"description\": \"Grande final dos Jogos Internos 2025.\",\n       \"start_time\": \"2025-09-15T19:00:00-03:00\",\n       \"end_time\": \"2025-09-15T20:30:00-03:00\",\n       \"location\": \"Ginásio do IFRN - Campus Natal Central\"\n     }\n   }\n\n\n**Exemplo de Resposta:**\n\n.. code-block:: json\n\n   {\n     \"status\": \"success\",\n     \"message\": \"Evento criado com sucesso com o ID: a1b2c3d4e5f6g7h8i9j0\"\n   }","operationId":"create_event_api_v1_calendar_events_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CalendarEventCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StatusResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"AuthURLResponse":{"properties":{"authorization_url":{"type":"string","title":"Authorization Url"}},"type":"object","required":["authorization_url"],"title":"AuthURLResponse"},"CalendarEventCreate":{"properties":{"user_email":{"type":"string","format":"email","title":"User Email"},"match_details":{"items":{"$ref":"#/components/schemas/MatchDetails"},"type":"array","title":"Match Details"}},"type":"object","required":["user_email","match_details"],"title":"CalendarEventCreate"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"MatchDetails":{"properties":{"summary":{"type":"string","title":"Summary"},"description":{"type":"string","title":"Description"},"start_time":{"type":"string","format":"date-time","title":"Start Time"},"end_time":{"type":"string","format":"date-time","title":"End Time"},"location":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Location","default":"Ginásio IFRN"}},"type":"object","required":["summary","description","start_time","end_time"],"title":"MatchDetails"},"StatusResponse":{"properties":{"status":{"type":"string","title":"Status"},"message":{"type":"string","title":"Message"}},"type":"object","required":["status","message"],"title":"StatusResponse"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}