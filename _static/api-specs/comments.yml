{"openapi":"3.1.0","info":{"title":"FastAPI","version":"0.1.0"},"paths":{"/api/v1/matches/{match_id}/chat/":{"get":{"tags":["Chats"],"summary":"Chat Details","description":"Get Chat Details by Match\n\nRetorna os detalhes da sala de chat associada a uma partida específica.\nCada partida possui uma única sala de chat.\n\n**Exemplo de Resposta:**\n\n.. code-block:: json\n\n   {\n     \"id\": \"a1b2c3d4-e5f6-a7b8-c9d0-e1f2a3b4c5d6\",\n     \"match_id\": \"c1d2e3f4-a5b6-7890-1234-567890abcdef\",\n     \"created_at\": \"2025-08-10T13:59:00Z\",\n     \"finished_at\": null\n   }","operationId":"chat_details_api_v1_matches__match_id__chat__get","parameters":[{"name":"match_id","in":"path","required":true,"schema":{"type":"string","title":"Match Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/chat/{chat_id}/messages/":{"get":{"tags":["Messages"],"summary":"Get Messages","description":"List Messages in a Chat\n\nLista todas as mensagens de uma sala de chat específica.\n\n**Exemplo de Resposta:**\n\n.. code-block:: json\n\n   [\n     {\n       \"id\": \"f1a2b3c4-d5e6-f7a8-b9c0-d1e2f3a4b5c6\",\n       \"chat_id\": \"a1b2c3d4-e5f6-a7b8-c9d0-e1f2a3b4c5d6\",\n       \"user_id\": \"20231012030011\",\n       \"body\": \"Bom dia! Alguém sabe que horas começa o jogo?\",\n       \"created_at\": \"2025-08-10T09:30:00Z\"\n     },\n     {\n       \"id\": \"e1f2a3b4-c5d6-e7f8-a9b0-c1d2e3f4a5b6\",\n       \"chat_id\": \"a1b2c3d4-e5f6-a7b8-c9d0-e1f2a3b4c5d6\",\n       \"user_id\": \"20221012030005\",\n       \"body\": \"Acho que é às 14h.\",\n       \"created_at\": \"2025-08-10T09:32:15Z\"\n     }\n   ]","operationId":"get_messages_api_v1_chat__chat_id__messages__get","parameters":[{"name":"chat_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Chat Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/MessageResponse"},"title":"Response Get Messages Api V1 Chat  Chat Id  Messages  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["Messages"],"summary":"Create Message","description":"Create a Message\n\nEnvia uma nova mensagem para uma sala de chat.\n- A ação é restrita a usuários com o papel 'Organizador' ou 'Jogador'.\n- Após o envio, um evento WebSocket (`new_message`) é emitido para a sala da partida\n  associada ao chat, permitindo a atualização em tempo real para os clientes.\n\n**Exemplo de Corpo da Requisição (Payload):**\n\n.. code-block:: json\n\n   {\n     \"body\": \"O jogo foi confirmado para as 14h. Não se atrasem!\"\n   }\n\n**Exemplo de Resposta:**\n\n.. code-block:: json\n\n   {\n     \"id\": \"d4e5f6a7-b8c9-d0e1-f2a3-b4c5d6e7f8a9\",\n     \"chat_id\": \"a1b2c3d4-e5f6-a7b8-c9d0-e1f2a3b4c5d6\",\n     \"user_id\": \"20211012030001\",\n     \"body\": \"O jogo foi confirmado para as 14h. Não se atrasem!\",\n     \"created_at\": \"2025-08-10T10:05:00Z\"\n   }","operationId":"create_message_api_v1_chat__chat_id__messages__post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"chat_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Chat Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageCreateRequest"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/matches/{match_id}/comments/":{"get":{"tags":["Comments"],"summary":"Get Comments","description":"List Comments by Match\n\nLista todos os comentários associados a uma partida específica, identificada pelo `match_id`.\n\n**Exemplo de Resposta:**\n\n.. code-block:: json\n\n   [\n     {\n       \"id\": \"a1b2c3d4-e5f6-a7b8-c9d0-e1f2a3b4c5d6\",\n       \"match_id\": \"c1d2e3f4-a5b6-7890-1234-567890abcdef\",\n       \"body\": \"Que golaço do time da casa!\",\n       \"created_at\": \"2025-08-10T14:15:30Z\"\n     },\n     {\n       \"id\": \"b2c3d4e5-f6a7-b8c9-d0e1-f2a3b4c5d6e7\",\n       \"match_id\": \"c1d2e3f4-a5b6-7890-1234-567890abcdef\",\n       \"body\": \"Juiz marcou falta, mas não pareceu.\",\n       \"created_at\": \"2025-08-10T14:18:05Z\"\n     }\n   ]","operationId":"get_comments_api_v1_matches__match_id__comments__get","parameters":[{"name":"match_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Match Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CommentResponse"},"title":"Response Get Comments Api V1 Matches  Match Id  Comments  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["Comments"],"summary":"Create Comment","description":"Create a Comment\n\nCria um novo comentário para uma partida. A ação é restrita a usuários com o papel 'Organizador'.\nApós a criação, um evento WebSocket (`create_comment`) é emitido para a sala da partida,\npermitindo que clientes atualizem a UI em tempo real. Um log de auditoria também é gerado.\n\n**Exemplo de Corpo da Requisição (Payload):**\n\n.. code-block:: json\n\n   {\n     \"body\": \"Cartão amarelo para o camisa 5 por reclamação.\"\n   }\n\n**Exemplo de Resposta:**\n\n.. code-block:: json\n\n   {\n     \"id\": \"d4e5f6a7-b8c9-d0e1-f2a3-b4c5d6e7f8a9\",\n     \"match_id\": \"c1d2e3f4-a5b6-7890-1234-567890abcdef\",\n     \"body\": \"Cartão amarelo para o camisa 5 por reclamação.\",\n     \"created_at\": \"2025-08-10T14:25:10Z\"\n   }","operationId":"create_comment_api_v1_matches__match_id__comments__post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"match_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Match Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CommentRequest"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CommentResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/matches/{match_id}/comments/{comment_id}":{"get":{"tags":["Comments"],"summary":"Comment Details","description":"Get Comment Details\n\nBusca os detalhes de um comentário específico pelo seu ID.\nO acesso é restrito a usuários com o papel 'Organizador'.\n\n**Exemplo de Resposta:**\n\n.. code-block:: json\n\n   {\n     \"id\": \"a1b2c3d4-e5f6-a7b8-c9d0-e1f2a3b4c5d6\",\n     \"match_id\": \"c1d2e3f4-a5b6-7890-1234-567890abcdef\",\n     \"body\": \"Que golaço do time da casa!\",\n     \"created_at\": \"2025-08-10T14:15:30Z\"\n   }","operationId":"comment_details_api_v1_matches__match_id__comments__comment_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"match_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Match Id"}},{"name":"comment_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Comment Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CommentResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["Comments"],"summary":"Update Comment","description":"Update a Comment\n\nAtualiza o corpo de um comentário existente.\nApós a atualização, um evento WebSocket (`update_comment`) é emitido para a sala da partida.\nAção restrita a usuários com o papel 'Organizador'. A rota não retorna conteúdo.\n\n**Exemplo de Corpo da Requisição (Payload):**\n\n.. code-block:: json\n\n   {\n     \"body\": \"Correção: O cartão foi para o camisa 8, não o 5.\"\n   }","operationId":"update_comment_api_v1_matches__match_id__comments__comment_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"match_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Match Id"}},{"name":"comment_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Comment Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CommentRequest"}}}},"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Comments"],"summary":"Delete Comment","description":"Delete a Comment\n\nExclui um comentário existente.\nApós a exclusão, um evento WebSocket (`delete_comment`) é emitido para a sala da partida.\nAção restrita a usuários com o papel 'Organizador'. A rota não retorna conteúdo.","operationId":"delete_comment_api_v1_matches__match_id__comments__comment_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"match_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Match Id"}},{"name":"comment_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Comment Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/matches/":{"get":{"tags":["Matches"],"summary":"Get Matches","description":"List Matches by Competition\n\nLista as partidas de uma competição específica. O parâmetro `competition_id` é obrigatório.\nA lista é ordenada para mostrar primeiro as partidas \"em progresso\" e depois por data de início.\nA rota suporta paginação através dos parâmetros `limit` e `offset`.\n\n**Exemplo de Resposta:**\n\n.. code-block:: json\n\n   [\n     {\n       \"match_id\": \"a1b2c3d4-e5f6-a7b8-c9d0-e1f2a3b4c5d6\",\n       \"competition_id\": \"c1d2e3f4-a5b6-7890-1234-567890abcdef\",\n       \"team_home_id\": \"d1e2f3a4-b5c6-d7e8-f9a0-b1c2d3e4f5a6\",\n       \"team_away_id\": \"e1f2a3b4-c5d6-e7f8-a9b0-c1d2e3f4a5b6\",\n       \"score_home\": 1,\n       \"score_away\": 0,\n       \"status\": \"in-progress\",\n       \"start_time\": \"2025-08-10T14:00:00Z\",\n       \"round\": 1\n     },\n     {\n       \"match_id\": \"b2c3d4e5-f6a7-b8c9-d0e1-f2a3b4c5d6e7\",\n       \"competition_id\": \"c1d2e3f4-a5b6-7890-1234-567890abcdef\",\n       \"team_home_id\": \"f1a2b3c4-d5e6-f7a8-b9c0-d1e2f3a4b5c6\",\n       \"team_away_id\": \"a1b2c3d4-e5f6-a7b8-c9d0-e1f2a3b4c5d6\",\n       \"score_home\": 0,\n       \"score_away\": 0,\n       \"status\": \"not-started\",\n       \"start_time\": \"2025-08-10T16:00:00Z\",\n       \"round\": 1\n     }\n   ]","operationId":"get_matches_api_v1_matches__get","parameters":[{"name":"competition_id","in":"query","required":true,"schema":{"type":"string","description":"Filtrar partidas por competição","title":"Competition Id"},"description":"Filtrar partidas por competição"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Número máximo de partidas por página","default":6,"title":"Limit"},"description":"Número máximo de partidas por página"},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Número de partidas a pular","default":0,"title":"Offset"},"description":"Número de partidas a pular"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/MatchResponse"},"title":"Response Get Matches Api V1 Matches  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/matches/{match_id}":{"get":{"tags":["Matches"],"summary":"Get Match Details","description":"Get Match Details\n\nBusca os detalhes de uma partida específica pelo seu ID.\n\n**Exemplo de Resposta:**\n\n.. code-block:: json\n\n   {\n     \"match_id\": \"a1b2c3d4-e5f6-a7b8-c9d0-e1f2a3b4c5d6\",\n     \"competition_id\": \"c1d2e3f4-a5b6-7890-1234-567890abcdef\",\n     \"team_home_id\": \"d1e2f3a4-b5c6-d7e8-f9a0-b1c2d3e4f5a6\",\n     \"team_away_id\": \"e1f2a3b4-c5d6-e7f8-a9b0-c1d2e3f4a5b6\",\n     \"score_home\": 1,\n     \"score_away\": 0,\n     \"status\": \"in-progress\",\n     \"start_time\": \"2025-08-10T14:00:00Z\",\n     \"round\": 1\n   }","operationId":"get_match_details_api_v1_matches__match_id__get","parameters":[{"name":"match_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Match Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MatchResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/matches/{match_id}/start-match":{"patch":{"tags":["Matches"],"summary":"Start Match","description":"Start a Match\n\nInicia uma partida, alterando seu status para 'in-progress'.\nEsta é uma ação restrita a usuários com o papel 'Organizador'.\nA rota não retorna conteúdo no corpo da resposta.","operationId":"start_match_api_v1_matches__match_id__start_match_patch","security":[{"HTTPBearer":[]}],"parameters":[{"name":"match_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Match Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/matches/{match_id}/end-match":{"delete":{"tags":["Matches"],"summary":"End Match","description":"End a Match\n\nFinaliza uma partida. Esta ação:\n1. Altera o status da partida para 'finished'.\n2. Publica uma mensagem para notificar outros serviços sobre o resultado.\n3. Remove o registro da partida da tabela de partidas ativas.\n\nEsta é uma ação restrita a usuários com o papel 'Organizador'.\nA rota não retorna conteúdo no corpo da resposta.","operationId":"end_match_api_v1_matches__match_id__end_match_delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"match_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Match Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/matches/{match_id}/update-score":{"patch":{"tags":["Matches"],"summary":"Update Match Score","description":"Update Match Score\n\nAtualiza o placar de uma partida em andamento.\nApós a atualização, um evento WebSocket (`score_updated`) é emitido para a sala\ncorrespondente ao `match_id`, permitindo que clientes atualizem a UI em tempo real.\nEsta é uma ação restrita a usuários com o papel 'Organizador'.\n\n**Exemplo de Corpo da Requisição (Payload):**\n\n.. code-block:: json\n\n   {\n     \"score_home\": 2,\n     \"score_away\": 1\n   }","operationId":"update_match_score_api_v1_matches__match_id__update_score_patch","security":[{"HTTPBearer":[]}],"parameters":[{"name":"match_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Match Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MatchRequestUpdateScore"}}}},"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"ChatResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"match_id":{"type":"string","format":"uuid","title":"Match Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"finished_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Finished At"}},"type":"object","required":["id","match_id","created_at"],"title":"ChatResponse"},"CommentRequest":{"properties":{"body":{"type":"string","title":"Body"}},"type":"object","required":["body"],"title":"CommentRequest"},"CommentResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"body":{"type":"string","title":"Body"},"match_id":{"type":"string","format":"uuid","title":"Match Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["id","body","match_id","created_at"],"title":"CommentResponse"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"MatchRequestUpdateScore":{"properties":{"score_home":{"type":"integer","title":"Score Home"},"score_away":{"type":"integer","title":"Score Away"}},"type":"object","required":["score_home","score_away"],"title":"MatchRequestUpdateScore"},"MatchResponse":{"properties":{"match_id":{"type":"string","format":"uuid","title":"Match Id"},"competition_id":{"type":"string","format":"uuid","title":"Competition Id"},"team_home_id":{"type":"string","format":"uuid","title":"Team Home Id"},"team_away_id":{"type":"string","format":"uuid","title":"Team Away Id"},"score_home":{"type":"integer","title":"Score Home"},"score_away":{"type":"integer","title":"Score Away"},"status":{"type":"string","title":"Status"}},"type":"object","required":["match_id","competition_id","team_home_id","team_away_id","score_home","score_away","status"],"title":"MatchResponse"},"MessageCreateRequest":{"properties":{"body":{"type":"string","title":"Body"}},"type":"object","required":["body"],"title":"MessageCreateRequest"},"MessageResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"body":{"type":"string","title":"Body"},"chat_id":{"type":"string","format":"uuid","title":"Chat Id"},"user_id":{"type":"string","title":"User Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["id","body","chat_id","user_id","created_at"],"title":"MessageResponse"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}},"securitySchemes":{"HTTPBearer":{"type":"http","scheme":"bearer"}}}}