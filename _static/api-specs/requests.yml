{"openapi":"3.1.0","info":{"title":"FastAPI","version":"0.1.0"},"paths":{"/api/v1/requests/":{"get":{"tags":["Requests"],"summary":"Get Requests","description":"List Requests\n\nLista as solicitações pendentes, aprovadas ou rejeitadas. O acesso é restrito para usuários com o papel 'Organizador'.\nÉ possível filtrar a lista por status (ex: `pending`) ou por tipo de solicitação (ex: `approve_team`).\n\n**Exemplo de Resposta:**\n\n.. code-block:: json\n\n   [\n     {\n       \"id\": \"a1b2c3d4-e5f6-a7b8-c9d0-e1f2a3b4c5d6\",\n       \"request_type\": \"approve_team\",\n       \"status\": \"pending\",\n       \"reason\": null,\n       \"reason_rejected\": null,\n       \"campus_code\": \"NAT-CN\",\n       \"team_id\": \"c1d2e3f4-a5b6-b7c8-d9e0-f1a2b3c4d5e6\",\n       \"user_id\": null,\n       \"competition_id\": \"d1e2f3a4-b5c6-d7e8-f9a0-b1c2d3e4f5a6\",\n       \"created_at\": \"2025-08-04T21:14:25.123Z\"\n     },\n     {\n       \"id\": \"b2c3d4e5-f6a7-b8c9-d0e1-f2a3b4c5d6e7\",\n       \"request_type\": \"add_team_member\",\n       \"status\": \"pending\",\n       \"reason\": null,\n       \"reason_rejected\": null,\n       \"campus_code\": \"NAT-CN\",\n       \"team_id\": \"c1d2e3f4-a5b6-b7c8-d9e0-f1a2b3c4d5e6\",\n       \"user_id\": \"20231012030015\",\n       \"competition_id\": null,\n       \"created_at\": \"2025-08-04T22:30:00.000Z\"\n     }\n   ]","operationId":"get_requests_api_v1_requests__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/RequestStatusEnum"},{"type":"null"}],"description":"Filtrar solicitações por status","title":"Status"},"description":"Filtrar solicitações por status"},{"name":"request_type","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/RequestTypeEnum"},{"type":"null"}],"description":"Filtrar solicitações por tipo","title":"Request Type"},"description":"Filtrar solicitações por tipo"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/RequestsResponse"},"title":"Response Get Requests Api V1 Requests  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/requests/{request_id}":{"get":{"tags":["Requests"],"summary":"Details Request","description":"Get Request Details\n\nBusca os detalhes de uma solicitação específica pelo seu ID.\nO acesso é restrito para usuários com o papel 'Organizador'.\n\n**Exemplo de Resposta:**\n\n.. code-block:: json\n\n   {\n     \"id\": \"a1b2c3d4-e5f6-a7b8-c9d0-e1f2a3b4c5d6\",\n     \"request_type\": \"approve_team\",\n     \"status\": \"pending\",\n     \"reason\": \"Criação da equipe para os JIFs 2025.\",\n     \"reason_rejected\": null,\n     \"campus_code\": \"NAT-CN\",\n     \"team_id\": \"c1d2e3f4-a5b6-b7c8-d9e0-f1a2b3c4d5e6\",\n     \"user_id\": null,\n     \"competition_id\": \"d1e2f3a4-b5c6-d7e8-f9a0-b1c2d3e4f5a6\",\n     \"created_at\": \"2025-08-04T21:14:25.123Z\"\n   }","operationId":"details_request_api_v1_requests__request_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"request_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Request Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["Requests"],"summary":"Update Request Reason Rejected","description":"Approve or Reject a Request\n\nAprova ou rejeita uma solicitação pendente. Esta ação é realizada por um 'Organizador'.\nA rota atualiza o status da solicitação e publica um evento para que o serviço correspondente\n(ex: serviço de times) execute a ação final (criar time, adicionar membro, etc.).\n\n- Para rejeitar, o status deve ser `rejected` e o campo `reason_rejected` é obrigatório.\n- Para aprovar, o status deve ser `approved`.\n\n**Exemplo de Corpo da Requisição (Aprovação):**\n\n.. code-block:: json\n\n   {\n     \"status\": \"approved\"\n   }\n\n**Exemplo de Corpo da Requisição (Rejeição):**\n\n.. code-block:: json\n\n   {\n     \"status\": \"rejected\",\n     \"reason_rejected\": \"A equipe não possui o número mínimo de membros inscritos.\"\n   }\n\n\n**Exemplo de Resposta (202 Accepted):**\n\n.. code-block:: json\n\n   {\n     \"message\": \"Solicitação para criação de equipe atualizada!\",\n     \"team_id\": \"c1d2e3f4-a5b6-b7c8-d9e0-f1a2b3c4d5e6\",\n     \"campus_code\": \"NAT-CN\"\n   }","operationId":"update_request_reason_rejected_api_v1_requests__request_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"request_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Request Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestsPutRequest"}}}},"responses":{"202":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/health":{"get":{"summary":"Health Check","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"RequestStatusEnum":{"type":"string","enum":["pendent","approved","rejected"],"title":"RequestStatusEnum"},"RequestTypeEnum":{"type":"string","enum":["approve_team","delete_team","remove_team_member","add_team_member"],"title":"RequestTypeEnum"},"RequestsPutRequest":{"properties":{"reason_rejected":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Reason Rejected"},"status":{"$ref":"#/components/schemas/RequestStatusEnum"}},"type":"object","required":["status"],"title":"RequestsPutRequest"},"RequestsResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"team_id":{"type":"string","format":"uuid","title":"Team Id"},"user_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"User Id"},"competition_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Competition Id"},"campus_code":{"type":"string","title":"Campus Code"},"request_type":{"$ref":"#/components/schemas/RequestTypeEnum"},"reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Reason"},"reason_rejected":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Reason Rejected"},"status":{"$ref":"#/components/schemas/RequestStatusEnum"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["id","team_id","campus_code","request_type","status","created_at"],"title":"RequestsResponse"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}},"securitySchemes":{"HTTPBearer":{"type":"http","scheme":"bearer"}}}}