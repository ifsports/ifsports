_format_version: "3.0"

services:
  - name: auth-service
    url: http://authapi:8000
    routes:
      - name: auth-public-login-route
        paths:
          - /api/v1/auth/token
          - /api/v1/auth/token/refresh
        strip_path: false
        preserve_host: true

      - name: auth-public-suap-callback-route
        paths:
          - /auth/suap/callback
        strip_path: false
        preserve_host: true

      - name: auth-public-validate-users-route
        methods: 
          - POST 
        paths:
          - /api/v1/auth/users
        strip_path: false
        preserve_host: true

      - name: auth-protected-users-route
        paths:
          - /api/v1/auth/logout
          - /api/v1/auth/users/me
          - /api/v1/auth/users/
        plugins:
          - name: jwt
        strip_path: false
        preserve_host: true

  - name: requests-service
    url: http://requestsapi:8001
    routes:
      - name: requests-route
        paths:
          - /api/v1/requests
        strip_path: false
        preserve_host: true

  - name: match-comments-service
    url: http://commentsapi:8002
    routes:
      - name: matches-api-route
        paths:
          - /api/v1/matches
        strip_path: false
        preserve_host: true
      - name: messages-api-route
        paths:
          - /api/v1/chat
        strip_path: false
        preserve_host: true
      - name: socket-io-route
        paths:
          - /socket.io
        strip_path: false
        preserve_host: true

  - name: teams-service
    url: http://teamsapi:8003
    routes:
      - name: teams-route
        paths:
          - /api/v1/teams
        strip_path: false
        preserve_host: true

  - name: competitions-service
    url: http://competitionsapi:8007
    routes:
      - name: competitions-api-route
        paths:
          - /api/v1/competitions
        strip_path: false
        preserve_host: true
      - name: modalities-api-route
        paths:
          - /api/v1/modalities
        strip_path: false
        preserve_host: true
      - name: api-schema-route
        paths:
          - /api/schema
        strip_path: false
        preserve_host: true
      - name: api-docs-route
        paths:
          - /api/docs
        strip_path: false
        preserve_host: true
      - name: media-route
        paths:
          - /media
        strip_path: false
        preserve_host: true

  - name: audit-service
    url: http://audit:8008
    routes:
      - name: audit-route
        paths:
          - /api/v1/campus
        plugins:
          - name: jwt
        strip_path: false
        preserve_host: true

consumers:
  - username: platform-users-recomeco

jwt_secrets:
  - consumer: platform-users-recomeco
    key: ifsports-recomeco
    algorithm: HS256
    secret: "kM3b-z8RpLqW9vY7xJ4tG6sF2cH1eA5nK0jU8iO-vC7xZ1qP9mL3bE4"